#hero {
  padding: clamp(1rem, 3.5vw, 3rem) 0 2rem;
}

#hero-inner {
  text-align: center;
}

#hero-title {
  font-size: clamp(2rem, calc(3.6vw + 1rem), 3.4rem);
  line-height: 1.15;
  margin: 0.8rem 0 0.6rem;
  letter-spacing: 0.2px;
  font-weight: 700;
}

#hero-title .marker-underline::after {
  content: "";
  position: absolute;
  left: -2px;
  right: -2px;
  bottom: -0.02em;
  /* tuck closer to the baseline */
  height: 0.20em;
  /* slightly slimmer to avoid overlap */
  background-color: var(--accent-1);
  transform: none;
  /* rely on path for the swoosh */
  box-shadow:
    0 1px 1px rgba(0, 0, 0, 0.14);
  opacity: .96;
  z-index: -1;
  /* keep behind the text */

  /* Wavy top edge via SVG mask; keeps color from CSS var */
  /* Upward swoosh, thicker on the left tapering to the right */
  -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 32' preserveAspectRatio='none'><path d='M0 16 C 28 18 72 26 100 24 L 100 32 L 0 32 Z' fill='%23000'/></svg>");
  -webkit-mask-size: 100% 100%;
  -webkit-mask-repeat: no-repeat;
  mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 32' preserveAspectRatio='none'><path d='M0 16 C 28 18 72 26 100 24 L 100 32 L 0 32 Z' fill='%23000'/></svg>");
  mask-size: 100% 100%;
  mask-repeat: no-repeat;
}

#hero-subtitle {
  max-width: 60ch;
  margin: 0 auto 1.4rem;
  color: var(--muted);
  text-align: center;
}

#hero-figure {
  width: 100%;
  margin: 0 auto;
  border: 1px solid var(--panel-edge);
  /* Square bottom corners, rounded top corners */
  border-radius: 12px 12px 0 0;
  position: relative;
  overflow: hidden;
  aspect-ratio: 16/9;
}

/* Crossfade slideshow images */
#hero-figure > img,
#hero-figure > .hero-slide {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  /* Match the figure: square bottom corners */
  border-radius: 12px 12px 0 0;
}


/* Base state and three-way crossfade */
.hero-slide { opacity: 0; will-change: opacity, transform; }
/* Apply subtle pan/zoom to slides (not the figure) so borders stay aligned */
.hero-slide-1 { animation: heroPan 18s ease-in-out infinite, heroFade1 18s ease-in-out infinite both; }
.hero-slide-2 { animation: heroPan 18s ease-in-out infinite, heroFade2 18s ease-in-out infinite both; }
.hero-slide-3 { animation: heroPan 18s ease-in-out infinite, heroFade3 18s ease-in-out infinite both; }

/* Slide 1: visible at start, crossfade to 2, then fades in before loop end to cross back from 3 */
@keyframes heroFade1 {
  0%   { opacity: 1; }
  30%  { opacity: 1; }
  36%  { opacity: 0; }
  94%  { opacity: 0; }
  100% { opacity: 1; }
}

/* Slide 2: fades in as 1 fades out, fades out as 3 fades in */
@keyframes heroFade2 {
  0%   { opacity: 0; }
  30%  { opacity: 0; }
  36%  { opacity: 1; }
  63%  { opacity: 1; }
  69%  { opacity: 0; }
  100% { opacity: 0; }
}

/* Slide 3: fades in as 2 fades out, then fades out to hand back to 1 */
@keyframes heroFade3 {
  0%   { opacity: 0; }
  63%  { opacity: 0; }
  69%  { opacity: 1; }
  94%  { opacity: 1; }
  100% { opacity: 0; }
}

/* Subtle overall pan/zoom for the slides to add motion without changing layout */
@keyframes heroPan {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.015); }
  100% { transform: scale(1); }
}

/* Respect reduced motion: keep crossfade, remove zoom and slow it slightly */
@media (prefers-reduced-motion: reduce) {
  .hero-slide-1 { animation: heroFade1 24s ease-in-out infinite both !important; }
  .hero-slide-2 { animation: heroFade2 24s ease-in-out infinite both !important; }
  .hero-slide-3 { animation: heroFade3 24s ease-in-out infinite both !important; }
}

@media (max-width: 700px) {
  #hero-subtitle {
    margin-bottom: 0.8rem;
  }
}

/* Ensure the hero figure's visual width aligns with bordered panels on mobile */
@media (max-width: 899px) {
  #hero-figure {
    /* Subtract 1px per side so the outer border matches the where-fits border width */
    width: calc(100% - 2 * var(--edge-border));
  }
}
