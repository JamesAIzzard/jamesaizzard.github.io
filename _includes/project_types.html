<section id="project-types" class="panel-surface">
    <div class="container">

        <div class="pt-box border-panel" data-pt>

            {% assign pt = site.data.project_types %}

            <header class="pt-header panel-surface--lit">
                <h2 class="quote">What do your typical projects look like?</h2>
                <p class="pt-subtitle">
                    Projects come in different sizes, from routine CAD work to research and test-rig
                    development, to full product development. Pick a tab to see a typical overview of each.
                </p>
            </header>

            <div class="pt-tablist">
                {% for t in pt.types %}
                <button class="pt-tab{% if forloop.first %} is-active{% endif %}">{{ t.label }}</button>
                {% endfor %}
            </div>

            <div class="pt-panels">
                {% for t in pt.types %}
                <section class="pt-panel"{% unless forloop.first %} hidden{% endunless %}>
                    <div class="pt-scales">
                        <div class="pt-scale time" data-level="{{ t.scales.time | default: 2 }}">
                            <span class="pt-scale-label">Time</span>
                            <div class="pt-scale-dots" aria-hidden="true">
                                <span class="dot"></span>
                                <span class="dot"></span>
                                <span class="dot"></span>
                            </div>
                            <span class="pt-scale-text">
                                {% case t.scales.time %}
                                {% when 1 %}Shorter{% when 3 %}Longer{% else %}Medium{% endcase %}
                            </span>
                        </div>
                        <div class="pt-scale phases" data-mode="{{ t.scales.phases | default: 'single' }}">
                            <span class="pt-scale-label">Phases</span>
                            <div class="pt-scale-toggle" aria-hidden="true">
                                <span class="opt" data-opt="single">Single</span>
                                <span class="opt" data-opt="multi">Multi</span>
                            </div>
                            <span class="pt-scale-text">
                                {% if t.scales.phases == 'multi' %}Multiâ€‘phase{% else %}Single phase{% endif %}
                            </span>
                        </div>
                        <div class="pt-scale pricing" data-mode="{{ t.scales.pricing | default: 'fixed' }}">
                            <span class="pt-scale-label">Pricing</span>
                            <div class="pt-scale-toggle" aria-hidden="true">
                                <span class="opt" data-opt="fixed">Fixed</span>
                                <span class="opt" data-opt="hourly">Hourly</span>
                            </div>
                            <span class="pt-scale-text">
                                {% if t.scales.pricing == 'hourly' %}Typically hourly{% else %}Typically fixed{% endif %}
                            </span>
                        </div>
                    </div>
                    <div class="pt-grid">
                        <div class="pt-col">
                            <h3>Typical briefs</h3>
                            <ul class="pt-list">
                                {% for item in t.briefs %}
                                <li class="mini-quote">{{ item }}</li>
                                {% endfor %}
                            </ul>
                            <h3>Typical deliverables</h3>
                            <ul class="pt-list">
                                {% for item in t.deliverables %}
                                <li>{{ item }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="pt-col">
                            <h3>Typical characteristics</h3>
                            <ul class="pt-list pt-chars">
                                {% for item in t.characteristics %}
                                  {% if item.head %}
                                    <li><span class="pt-char-head">{{ item.head }}:</span> <span class="pt-char-desc">{{ item.desc }}</span></li>
                                  {% elsif item contains ':' %}
                                    {% assign head = item | split: ':' | first | strip %}
                                    {% assign desc = item | remove_first: head | remove_first: ':' | strip %}
                                    <li><span class="pt-char-head">{{ head }}:</span> <span class="pt-char-desc">{{ desc }}</span></li>
                                  {% else %}
                                    <li>{{ item }}</li>
                                  {% endif %}
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </section>
                {% endfor %}
            </div>
        </div>
    </div>

    <script>
        (function () {
            const root = document.querySelector('[data-pt]');
            if (!root) return;
            const tabs = Array.from(root.querySelectorAll('.pt-tab'));
            const panels = Array.from(root.querySelectorAll('.pt-panel'));

            function activate(idx) {
                tabs.forEach((t, i) => {
                    const selected = i === idx;
                    t.classList.toggle('is-active', selected);
                    if (panels[i]) panels[i].hidden = !selected;
                });
            }

            tabs.forEach((t, i) => {
                t.addEventListener('click', () => activate(i));
            });
        })();
    </script>
</section>
