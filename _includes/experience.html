<section id="experience" class="panel-surface">
    <div class="container">
        <div class="xp-section" aria-labelledby="xp-title">
            <header class="xp-header">
                <h2 id="xp-title">Experience</h2>
                <p class="muted">A quick overview of where I'm strongest — and where I'm still learning.</p>
                <div class="xp-colheads" aria-hidden="true">
                    <span>Skill</span>
                    <span>Experience</span>
                    <span>Notes</span>
                </div>
            </header>

            {% assign groups = site.data.experience.groups %}
            {% for group in groups %}
            <details class="xp-group" aria-labelledby="xp-g-{{ group.id | default: group.title | slugify }}" {% if group.open %}open{% endif %}>
                <summary id="xp-g-{{ group.id | default: group.title | slugify }}" class="xp-group-title">{{ group.title }}</summary>
                <ul class="xp-rows" role="rowgroup">
                    {% for item in group.items %}
                    {% assign lvl = item.level | plus: 0 %}
                    {% if lvl >= 80 %}{% assign lvl_label = 'Experienced' %}
                    {% elsif lvl >= 40 %}{% assign lvl_label = 'Competent' %}
                    {% else %}{% assign lvl_label = 'Learning' %}{% endif %}
                    <li class="xp-row" role="row">
                        <span class="xp-skill" role="rowheader">{{ item.skill }}</span>
                        <span class="xp-thermo" style="--level: {{ item.level }}%" title="{{ lvl_label }} ({{ item.level }}%)" aria-hidden="true">
                            <span class="tube"><span class="fill"></span></span>
                        </span>
                        <meter class="visually-hidden" min="0" max="100" value="{{ item.level }}">{{ item.skill }}: {{ lvl_label | downcase }}</meter>
                        <span class="xp-note">{{ item.note }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </details>
            {% endfor %}

            <footer class="xp-legend">
                <span><i class="dot-l" aria-hidden="true">•</i> 0–30%: learning</span>
                <span><i class="dot-c" aria-hidden="true">•</i> 40–70%: competent</span>
                <span><i class="dot-e" aria-hidden="true">•</i> 80–100%: experienced</span>
            </footer>
        </div>
    </div>
</section>
